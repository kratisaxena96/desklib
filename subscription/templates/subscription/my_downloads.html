{% extends "desklib/base.html" %}
{% block content %}
	
	{% block messages %}
		{% if messages %}

			<div>
				<ul>
					{% for message in messages %}
					<div class="alert alert-warning alert-dismissible fade show" role="alert">
							<strong>{{message}}</strong>
							<button type="button" class="close" data-dismiss="alert" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
					</div>
					{% endfor %}
				</ul>
			</div>
		{% endif %}
  	{% endblock %}
<h1>Download Summary of User</h1>

   {% if user_downloads %}
      <div class="col-md-12 well">
        {% for downloads in user_downloads %}
			{{downloads.document}}
			{{downloads.created_at|date:'Y-m-d H:i'}}
		  <br/>
		{% endfor %}
        <span class="step-links pagination">
            {% if user_downloads.has_previous %}
                <a href="?page1={{ user_downloads.previous_page_number }}"> previous </a>
            {% endif %}
            <span class="current">
                Page {{ user_downloads.number }} of {{ user_downloads.paginator.num_pages }}
            </span>
            {% if user_downloads.has_next %}
                <a href="?page1={{ user_downloads.next_page_number }}"> next </a>
            {% endif %}
        </span>
      </div>
      {% endif %}
<h1>Per Page View By User</h1>
      {% if page_view %}
      <div class="col-md-12 well">
        	{% for pages in page_view %}
					{{pages.document}}
					{{pages.created_at|date:'Y-m-d H:i'}}
		  <br/>
			{% endfor %}
        <span class="step-links pagination">
            {% if page_view.has_previous %}
                <a href="?page2={{ page_view.previous_page_number }}"> previous </a>
            {% endif %}
            <span class="current">
                Page {{ page_view.number }} of {{ page_view.paginator.num_pages }}
            </span>
            {% if page_view.has_next %}
                <a href="?page2={{ page_view.next_page_number }}"> next </a>
            {% endif %}
        </span>
      </div>
      {% endif %}

{% comment %}
	<h1>Documents Download By User</h1>
	{% for downloads in user_downloads %}
		{{downloads.document}}
		{{downloads.created_at|date:'Y-m-d H:i'}}
	{% endfor %}
<br/><br/>
	<h1>Pages View By User</h1>
	{% for pages in page_view %}
		{{pages.document}}
		{{pages.created_at|date:'Y-m-d H:i'}}
	{% endfor %}
{% endcomment %}

<section class="py-5">
      <div class="container-fluid">
      	<div class="row">
      		<div class="col-md-12">
      			<h2 class="text-center mb-3">My Downloads</h2>
      		</div>
      	</div>
        <div class="row">
            <div class="col-md-3">
                <div class="border p-1">
                    <a class="btn btn-light d-block text-decoration-none blue-theme" href="javascript:void(0);">My Profile</a>
                    <a class="btn btn-light d-block text-decoration-none blue-theme my-downloads" href="{% url 'my-downloads' %}">My Downloads</a>
                    <a class="btn btn-light d-block text-decoration-none blue-theme" href="javascript:void(0);">My Settings</a>
                    <a class="btn btn-light d-block text-decoration-none blue-theme" href="javascript:void(0);">My Accounts</a>
                    <a class="btn btn-light d-block text-decoration-none blue-theme" href="javascript:void(0);">Upload Files</a>
            </div>
        </div>
        	
            <div class="col-md-9 mt-3 mt-md-0">
            	<table class="table table-bordered">
            		 <thead>
            		 	 <tr>
            		 	 	   <th scope="col">Title</th>
            		 	 	    <th scope="col">Date</th>
            		 	 </tr>
            		 </thead>
            		 {% for downloads in user_downloads %}
            		   <tbody>
            		   	   <tr>
            		   	   	 <td scope="row">{{downloads.document}}</td>
            		   	   	  <td scope="row">{{downloads.created_at|date:'Y-m-d H:i'}}</td>
            		   	   </tr>
            		   </tbody>
            		   {% endfor %}
            	</table>
        </div>
      </div>
     </div>
</section>
<section class="mb-5">
	 <div class="container-fluid">
	 	<div class="row">
	 		<div class="col-md-12">
	 			<h2 class="text-center mb-3">My page view</h2>
	 		</div>
	 	</div>
	 	<div class="row">
	 		<div class="col-md-3"></div>
	 		<div class="col-md-9">
	 			<table class="table table-bordered">
	 				 <thead>
	 				 	 <tr>
	 				 	 	<th scope="col">Pages</th>
	 				 	 	<th scope="col">Date</th>
	 				 	 </tr>
	 				 </thead>
	 				 {% for pages in page_view %}
	 				   <tbody>
	 				   	 <tr>
	 				   	 	 <td scope="row">
	 				   	 	 	{{pages.document}}</td>
	 				   	 	  <td scope="row">
	 				   	 	  	{{pages.created_at|date:'Y-m-d H:i'}}
	 				   	 	  </td>
	 				   	 </tr>
	 				   </tbody>
	 				   {% endfor %}
	 			</table>
	 			
	 		</div>
	 	</div>
	 </div>
</section>

{% endblock %}

{% block extra_js %}
<script>
    $(document).ready(function (){
        $(".my-downloads").addClass("active");
    });
</script>
{% endblock %}