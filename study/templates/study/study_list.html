{% extends "desklib/base.html" %}
{% load staticfiles %}
{% load meta %}
{% load render_json_ld from json_ld %}
{% load thumbnail %}

    {% block extra_css %}

    {% endblock extra_css %}
{% block content %}

<section class="container-fluid banner-image-study">
    <div class="pt-10"></div>
    <div class="row pl-5">
          <div class="col-md-7 mt-8">
      </div>
        <div class="col-md-5 mt-8 float-right" style="margin-top: 8%;">
            <h6>Search from 10 million study resources</h6>
            <div class="mb-3">
            <form class="form-inline my-2 pt-3  my-lg-0" action="{% url 'study:search-results' %}">
                <div class="form-group w-75 mb-1">
                      <input type="text" name="q" class="form-control search-input box-shadow-3-3-5-5" placeholder="Search a topic or subject" aria-label="Search here" aria-describedby="basic-addon2">
                      <div class="input-group-append">
                          <button class="btn btn-outline-secondary rounded-circle" type="button"><i class="fa fa-search"></i></button>
                      </div>
                </div>

<!--              <input type="text" class="form-control form-rounded" placeholder="Search a topic or subject" aria-label="Recipient's username" aria-describedby="basic-addon2">-->
<!--              <div class="input-group-append">-->
<!--                <button class="btn btn-outline-secondary rounded-circle" type="button"><i class="fa fa-search"></i></button>-->
<!--              </div>-->
            </form>
<!--              <div class="input-group-append">-->
<!--                <i class="fa fa-search"></i>-->
<!--              </div>-->
            </div>
            <div class="row mt-0">
                <div class="col-md-3"></div>
                <div class="col-md-6">
                    <p class="pt">or <span style="color:#405FBD">Upload a document</span></p>
                </div>
            </div>
        </div>
        <div class="col-md-6">
        </div>
    </div>
</section>

<section class="container mt-4 pt-4">
   
   <div class="d-flex justify-content-center pb-3">
      <h2>Explore By Subjects</h2>
      <!--		<br/>-->
      <!--        -->
      <!--        <form action="/study/search" method="get" id="form">-->
      <!--        <input id ="id_q" name="q" type="text" />-->
      <!--        <input type="submit" />-->
   </div>
   <div class="row mt-4 mb-4" style="min-height: 125px;">
       {{subject_facet}}
      {% if subject_facet.fields.subjects %}
      {% for sub in subject_facet.fields.subjects %}
       <div class="col-3 text-center">
      <ul class="list-unstyled">
         <li class="mr-4 ml-4">
            <a href="/study/search/?q=&amp;selected_facets=subjects_exact:{{ sub.0|urlencode }}">{{ sub.0}}</a>
         </li>
      </ul>
       </div>
      {% endfor %}
      {% else %}
      <p>No subject filters.</p>
      {% endif %}
   </div>
</section>

<h2></h2>
<head >

<!--  <link rel="stylesheet" href="/resources/demos/style.css">  -->
    <style>
        .highlight{
            background-color: #FFFF00
            }
    </style>

    {% comment %}<!--    {%for subject in facets.fields.subjects|slice:":5" %}-->
<!--    <input id="check" type="checkbox" name="selected_facets" value="subjects_exact:{{ subject.0|urlencode }}">{{subject.0}}<br>-->
<!--    <input type="hidden" name="q" value="123">-->

<!--{% endfor %}-->
{% endcomment %}

  <section class="top-study">
    <h2 class="text-center font-size-40">Top Resources</h2>
    <div class="container">
        <div class="row">
            <div  class="owl-carousel owl-theme mt-4">
              {% for top in top_results %}
                        <a href="{% url 'documents:document-view' top.slug %}">
                            <div class="item shadow mr-1 mb-5 bg-white rounded">
                        <div class="card" style="height:228px">
                            <img class="card-img-top card-height" src="{{top.cover_image}}" alt="Card image">
                            <div class="card-body">
                                    <p style="font-size:12px;" class="card-text">{{top.title|truncatechars:25}}</p>
                            </div>
                        </div>
                            </div>
                    </a>
                {% endfor %}
            </div>
    </div>
                <div><p style="font-size:12px; margin-bottom: 0;" class="text-center font-size-20 font-weight-400 padding-bottom-30"><a href="#">View all</a></p></div>
    </div>
</section>
     <section class="top-study mt-0  bg-white">
    <h2 class="text-center font-size-40">Recent Uploads</h2>
    <div class="container">
        <div class="row">
            <div class="owl-carousel owl-theme mt-4">
              {% for rec in recent %}
                        <a href="{% url 'documents:document-view' rec.slug %}">
                            <div class="item shadow mr-1 mb-5 bg-white rounded">
                                <div class="card" style="height:228px">
                                    <img class="card-img-top card-height" src="/media/{{rec.cover_image}}" alt="Card image">
                                    <div class="card-body">
                                            <p style="font-size:12px" class="card-text">{{rec.title|truncatechars:25}}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="owl-theme">
                                <div class="owl-controls">
                                    <div class="custom-nav owl-nav"></div>
                                </div>
                            </div>
                    </a>
                {% endfor %}
            </div>
    </div>
                <div><p class="text-center font-size-20 font-weight-400 padding-bottom-30"><a href="#">View all</a></p></div>
    </div>
</section>
    <div class="top-study conatiner-fluid bg-light padding-bot">
         <h2 class="text-center font-size-40">Our Subscription Includes</h2>
           <section class="container">
                <div class="row text-center mt-4">
                    <div class="col-md-4 col-sm-12">
                        <img class="mb-4" src="{% static 'src/assets/images/unlimited views.png' %}"/>
                        <p>Unlimited Views</p>
                    </div>
                    <div class="col-md-4 col-sm-12">
                        <img class="mb-4" src="{% static 'src/assets/images/Downloads icon.png' %}"/>
                        <p>60 Download Per month</p>
                    </div>
                    <div class="col-md-4 col-sm-12">
                        <img class="mb-4" src="{% static 'src/assets/images/Documents icon.png' %}"/>
                        <p>Over 10,000 Free documents </p>
                    </div>
                </div>
                <div class="d-flex justify-content-center mt-4">
                    <button class="btn btn-primary btn-lg" style="border-radius: 10rem; width:12rem; margin-top:2%">Try Now</button>
                </div>
           </section>
    </div>
{% for subject in subjects %}
<a href="{% url 'study:search' %}?selected_facets=subjects_exact:{{ subject.slug }}">{{ subject.name }}</a>
{% endfor %}
{% endblock %}
          {% block extra_js %}
 <script>

 $(document).ready(function () {
            $(".owl-carousel").owlCarousel({
                  autoWidth:false,
                  nav:true,
                items: 4,
                loop: true,
                stagePadding: 10,
                dots: false,
                autoplay: true,
                margin: 50,
                responsiveClass: true,
                responsive: {
                    0: {
                        items: 1,
                    },
                    400: {
                        items: 2,
                    },
                    768: {
                        items: 4,
                    },
                    992: {
                        items: 5,
                    }
                }
            });

        });

$('#form').submit(function (event) {
  var tempArray = [];
  var count = 1
      $('input:checked[name="selected_facets"]').each(function(e) {
         var el = '<input type="hidden" name="selected_facets" value=""></input>';
          $('.selected_facets').val($(this).val());
          $('#form').append(el);
         
      tempArray.push('selected_facets=subjects_exact:'+$(this).val());
            });

  });

   $('#id_q').autocomplete({
 source: function (request, response) {
     $.getJSON("/study/autocomplete/?q=" + request.term, function (data) {
         response($.map(data, function (value, key) {
             return {
                label: value,
                value: key
             };
         }));
     });
 },
 minLength: 1
});
  $(document).ready(function () {
            $(".owl-first").owlCarousel({
                items: 5,
                loop: true,
                nav: true,
                stagePadding: 10,
                dots: false,
                autoplay: true,
                margin: 50,
                responsiveClass: true,
                responsive: {
                    0: {
                        items: 1,
                    },
                    400: {
                        items: 2,
                    },
                    768: {
                        items: 4,
                    },
                    992: {
                        items: 5,
                    }
                }
            });

        });

</script>
    {% endblock extra_js %}

