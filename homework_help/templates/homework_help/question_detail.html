{% extends "desklib/base.html" %}
{% load staticfiles %}
{% block content %}
<section>
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb mb-0">
          <li class="breadcrumb-item"><a href="/">Home</a></li>
          <li class="breadcrumb-item"><a href="{% url 'homework_help:ask-question-view'%}">Homework</a></li>
          <li class="breadcrumb-item active" aria-current="page">{{object.question|truncatechars:35}}</li>
      </ol>
</nav>
</section>
<section class="">
    <div class="container pt-5">
        <div class="row justify-content-center">
            <div class="col-md-12">
                <h2 class="">{{object.question|truncatechars:250}}</h2>
            </div>
        </div>
        <div class="row mt-4 mb-3 justify-content-center">
            {% for object in object.user_questionfiles.all %}
            <div class="col-md-12 mb-4">
                <div class="border border-secondary">
                    <img class="img-fluid mx-auto d-block" alt="question image" src="{{object.file.url}}" />
                    <span>{{object.content}}</span>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
<section class="bg-light">
    <div class="container pt-5 pb-5">
        <div class="row">
            <div class="col-md-12">
                <h2 class="text-center">Expert's Answers</h2>
                 <h5 class="mb-3 text-center">{{answer}} Answers Are Available</h5>
                 <div class="text-center">
                     {% comment %}
    				 <form action="" method="post" id="question-form" enctype="multipart/form-data">
                         {% csrf_token %}
                         <input type="hidden" name="question" value="{{object.id}}">
                         <input type="submit" value="View Answer" class="btn btn-bg-theme white border-radius-20 px-4">
                     </form>
                     {% endcomment %}
                    <a href="{% url 'homework_help:order-create-view' uid=object.uid %}" class="btn btn-bg-theme white border-radius-20 px-4">View Answers</a>
                 </div>
            </div>
        </div>
    </div>
</section>
<section class="">
    <div class="container pt-5 pb-5">
        <div class="row">
            <div class="col-md-12">
                <h2 class="text-center">More Questions From This Subjects</h2>
            </div>
        </div>
        <div class="row">
             {% for question in similar_questions %}
            <div class="col-6 col-md-4">
                <ul class="list-unstyled">
                    <li class="mb-2">
                         <a href="{% url 'homework_help:question-detail-view' slug=question.slug %}" class="blue-font">{{question.question|truncatechars:35}}</a>
                    </li>
                </ul>
            </div>
             {% endfor %}
        </div>
    </div>
</section>
<section class="bg-light-grey">
    <div class="container pb-5 pt-5">
        <div class="row">
            <div class="col-md-12">
                <h2 class="text-center">Ask a Question</h2>
                <div class="text-center">
                    <a href="{% url 'homework_help:ask-question-view'%}" class="btn btn-bg-theme white border-radius-20 px-4 mt-3">Ask Now</a>
                </div>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block extra_js %}

<script>

    $("#question-form").submit(function(e) {
        e.preventDefault();
        $("span.has-error").empty();

        var data = $("#question-form").serializeArray();


         //       if(data['message'] && data['reference_files']){
         //       $(".comments").append('<div class="current"></div>');
         //       $(".current").text( data['message'] + ' ' + data['reference_files'] )
         //         }
         //       else if(data['message']){
         //       $(".comments").append('<div class="current"></div>');
         //       $(".current").text( data['message'] )
         //         }
         //         else if(data['reference_files']){
         //       $(".comments").append('<div class="current"></div>');
         //       $(".current").text( data['reference_files'] )
         //         }





        var myForm = document.getElementById('question-form');
       data = new FormData(myForm);
       var d = data.unique_id


        $("div.error_file").text("");

                $(".enquiry-form-popup").hide();
                $(".form-icon-plane").hide();
                $(".form-loader").show();

        $.ajax({
            type : "POST",
            url : '{% url 'api:homework-help-api:order-create-api' %}',
            enctype: 'multipart/form-data',
            data: data,
            processData: false,
            contentType: false,
            success: function(data){



                document.getElementById("question-form").reset();
                window.location.replace( "/homework-help/order/" + data.uuid) ;
            },
            error: function(data){

            var response = data.responseJSON;
            for (key in response) {
              $("#comment-form ."+key).addClass("has-error");
              $("#comment-form span." + key).text(response[key][0]);
            }

            }
        });
    });

</script>

{% endblock %}

{% comment %}
{{object}}
{% endcomment %}