{% extends "desklib/base.html" %}
{% load i18n %}
{% load staticfiles %}
{% load countries %}
{% block head_title %}{% trans "payment" %}{% endblock %}

{% block content %}
<div class="pg_docpaymwnt">
    {% block messages %}
         {% if messages %}
            <div class="container">
                <div class="row">
                    <div class="col-md-4 notification-right">
                        <ul class="list-unstyled">
                        {% for message in messages %}
                            <li class="alert alert-warning alert-dismissible fade show">
                                <strong>{{message}}</strong>
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </li>
                        {% endfor %}
                        </ul>
                    </div>
                </div>
            </div>
         {% endif %}
    {% endblock %}

    <section class="pt-5 pb-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-12 col-lg-12 text-center">
                    <h1> Choose Your Plan </h1>
                    <p class="plan_sub_title pb-4"> Get the help you need, or your money back </p>
                </div>

                <div class="col-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="doc-tab">
                            <ul class="nav nav-tabs border border-radius-40" id="myTab" role="tablist">
                              <li class="nav-item col-6 text-center pl-0 pr-0">
                                <a class="nav-link active pt-3 pb-3 blue-theme border-radius-40 Roboto-Bold clickpaid" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">
                                    Paid Plan</a>
                              </li>
                              <li class="nav-item col-6 text-center pl-0 pr-0">
                                <a class="nav-link pt-3 pb-3 blue-theme border-radius-40 Roboto-Bold clickfree" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">
                                    Free Plan</a>
                              </li>
                            </ul>
                    </div>

                    <div class="tab-content pt-3 pb-3 border-radius-5" id="myTabContent">
                        <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                           <section class="pt-5">
                                <div class="container mb-5">
                                    <div class="row">
                                        {% for plan in plan_qs %}
                                            {% if plan.is_pay_per_download %}
                                             <div class="col-3 col-sm-3 col-md-3 col-lg-3 crd justify-content-center parent text-center md-margin-30px-bottom wow fadeInUp pl-2 pr-2">

                                                    <div class="docs_plan_box shadow-sm" id="{{plan.pk}}">
                                                        <a href="#check">
                                                        <label class="d-block label mt-2">
                                                            <div class="docs_plan_box_upper">
                                                                <input class="selected_plan" type="radio" name="radio" value="{{ plan.price }}" data-key="{{plan.key}}" style="display:none;">

                                                                <div class=" pl-2 pr-2">
                                                                    <div class="ribbon"> Best Value </div>
                                                                    <p class="font-weight-bold package_name"> {{plan}} </p>
                                                                    <h1 class="font-weight-bold"> $ {{ plan.price }} </h1>
                                                                    <p><small> /{{ plan.days }}days </small>
                                                                </div>

<!--                                                                <div class="btn_common btn_blue btn_gtstrtd text-center"> Get Started </div>-->


<!--                                                                <div class="btn_action text-center pt-4">-->
<!--                                                                    <button class="btn btn_common btn_blue btn_gtstrtd text-center"> Get Started </button>-->
<!--                                                                </div>-->
                                                            </div>

                                                            <div class="docs_plan_box_lower text-left pt-4 pl-2 pr-2 pb-4">
                                                                <ul class="list-unstyled pl-0 pl-4 pr-4">
                                                                    <li> <i class="fas fa-check-square check_blue"></i> {{plan.view_limit}} Document view </li>
                                                                    <li> <i class="fas fa-check-square check_blue"></i> {{ plan.download_limit }} Document Download </li>
<!--                                                                    <li> <i class="fas fa-check-square check_blue"></i> 1 Lesson </li>-->
<!--                                                                    <li> <i class="fas fa-check-square check_blue"></i> Subjects Available </li>-->
                                                                    <li> <i class="fas fa-check-square check_blue"></i> Free Customer Support </li>
                                                                    <li> <i class="fas fa-check-square check_blue"></i> Life Time Access </li>
                                                                </ul>
                                                            </div>
                                                        </label>
                                                            </a>
                                                    </div>

                                             </div>
                                            {% endif %}
                                        {% endfor %}

                                        {% for plan in plan_qs %}
                                            {% if not plan.is_pay_per_download %}
                                                  <div class="col-3 col-sm-3 col-md-3 col-lg-3 crd text-center md-margin-30px-bottom wow fadeInUp pl-2 pr-2 justify-content-center parent"  data-wow-delay="0.2s">
<!--                                                      <a href="#check">-->
<!--                                                        <div class="docs_plan_box shadow card mb-4">-->
<!--                                                            <label class="d-block label mt-2">-->
<!--                                                            <div class="card-body p-4">-->
<!--                                                                <input class="selected_plan" type="radio" name="radio" value="{{ plan.price }}" data-key="{{plan.key}}" style="display:none;">-->
<!--                                                                    <h5>{{plan}}</h5>-->
<!--                                                                    <h6 class="mb-1 mt-2 plan-content mb-3">Top rated plan</h6>-->

<!--                                                                            <div class="plan-price p-2"><sup>$</sup>{{ plan.price }}<span>/{{ plan.days }}days</span>-->
<!--                                                                                <hr style="width:80%;"></div>-->
<!--                                                                             <ul class="list-style-non text-left list-font">-->
<!--                                                                            <li><strong>Views: </strong> {{plan.view_limit}}</li>-->
<!--                                                                            <li><strong>Downloads: </strong> {{ plan.download_limit }}</li>-->

<!--                                                                        </ul>-->
<!--                                                            </div>-->
<!--                                                            </label>-->
<!--                                                        </div>-->
<!--                                                      </a>-->

                                                        <div class="docs_plan_box shadow-sm" >
                                                            <a href="#check">
                                                            <label class="d-block label mt-2">
                                                                <div class="docs_plan_box_upper">
                                                                    <input class="selected_plan" type="radio" name="radio" value="{{ plan.price }}" data-key="{{plan.key}}" style="display:none;">

                                                                    <div class="pl-2 pr-2" id="showRibbon">
                                                                        <p>  </p>
                                                                        <p class="font-weight-bold package_name"> {{plan}} </p>
                                                                        <h1 class="font-weight-bold"> $ {{ plan.price }} </h1>
                                                                        <p><small> /{{ plan.days }}days </small>
                                                                    </div>

<!--                                                                    <div class="btn_action ">-->
<!--                                                                        <button class="btn btn_common btn_blue btn_gtstrtd text-center"> Get Started </button>-->
<!--                                                                    </div>-->
                                                                </div>

                                                                <div class="docs_plan_box_lower text-left pt-4 pl-2 pr-2 pb-4">
                                                                    <ul class="list-unstyled pl-0 pl-4 pr-4">
                                                                        <li> <i class="fas fa-check-square check_blue"></i> {{plan.view_limit}} Document view </li>
                                                                        <li> <i class="fas fa-check-square check_blue"></i> {{ plan.download_limit }} Document Download </li>
<!--                                                                        <li> <i class="fas fa-check-square check_blue"></i> 1 Lesson </li>-->
<!--                                                                        <li> <i class="fas fa-check-square check_blue"></i> Subjects Available </li>-->
                                                                        <li> <i class="fas fa-check-square check_blue"></i> Free Customer Support </li>
                                                                    <li> <i class="fas fa-check-square check_blue"></i> Life Time Access </li>
                                                                    </ul>
                                                                </div>
                                                            </label>
                                                                </a>
                                                        </div>

                                                  </div>
                                            {% endif %}
                                        {% endfor %}
                                    </div>
                                </div>


                    {% comment %}
                    <form action="{{form.get_endpoint}}" method="post" id="form-check">
                        {% csrf_token %}
                        {{form}}
                        <input id="id_custom" name="custom" type="hidden" value=""/>
                        <input id="id_amount" name="amount" type="hidden"  value=""/>
                        <div class="row justify-content-center pt-5" >
                            <div class="col-md-9 col-lg-5"></div>
                        </div>
                        <div class="row justify-content-center mt-4">
                            <div class="col-lg-5 text-center">
                                <input type="submit" value="Proceed with Paypal" class="btn btn-bg-theme border-radius-20 text-white px-sm-5 px-4" id="submitButton">
                            </div>
                        </div>
                    </form>
                    {% endcomment %}
                            <div class="container all-currency border-radius-40 shadow mt-5" id="check">
                               <div class="row pt-5">
                                   <div class="col-md-12 text-center">
                                       <h2 class="blue-theme">Complete your subscription for instant access</h2>
                                       <h4> <span id="plan-name"> :</span>  <span id="add-money"> </span></h4>

                                   </div>
                                </div>
                                <div class="row">
                                   <div class="col-md-6">
                                       <div class="payment_option text-center">
                                           <h5 class="text-left">Payment options : </h5>
                                           <p class="paypal-error text-danger"></p>
                                           <div id="paypal-button-container"></div>

                                           <div id="loader"></div>
                                       </div>
                                   </div>
                                   <div class="col-md-6">
                                        <div class="selected_docs_detail text-left">
                                            <ul class="pl-0 pr-4 list-unstyled">

<!--                                                <li> <i class="fas fa-check-square check_yellow"></i> {{plan.view_limit}} Document view </li>-->
<!--                                                <li> <i class="fas fa-check-square check_yellow"></i> {{ plan.download_limit }} Document Download </li>-->
<!--                                                <li> <i class="fas fa-check-square check_yellow"></i> 1 Lesson </li>-->
<!--                                                <li> <i class="fas fa-check-square check_yellow"></i> Subjects Available </li>-->
                                            </ul>
                                            <p> By continuing you agree to the <a href="{% url 'termsofuse' %}">Terms & Conditions</a>, <a href="{% url 'privacypolicy' %}"> Privacy Policy</a>, <a href="{% url 'academicintegrity' %}">Academic Integrity</a>, <a href="{% url 'honorcode' %}">Honor Code</a> and <a href="{% url 'copyright' %}">Copyright</a> </p>
                                        </div>
                                   </div>
                                </div>
                                <div class="row text-center">
                                    <div class="col-md-12 docsPayOption">
                                        <img src="{% static 'src/assets/images/v2/secured_paypal.png' %}" alt="paypal icon" class="img-fluid">
                                        <img src="{% static 'src/assets/images/v2/payment_mode.png' %}" alt="paypal icon" class="img-fluid">
                                    </div>
                                </div>
                               </div>


                            <!-- Set up a container element for the button -->
                               {% comment %}
                                    <div class="row justify-content-center mt-4" id="check">
                                        <div class="col-lg-5 text-center">
                                            <p>
                                                By continuing you agree to the <a href="{% url 'termsofuse' %}">Terms & Conditions</a>, <a href="{% url 'privacypolicy' %}"> Privacy Policy</a>, <a href="{% url 'academicintegrity' %}">Academic Integrity</a>, <a href="{% url 'honorcode' %}">Honor Code</a> and <a href="{% url 'copyright' %}">Copyright</a>
                                            </p>
                                            <p class="paypal-error text-danger"></p>
                                            <div id="paypal-button-container"></div>
                                        </div>
                                    </div>
                               {% endcomment %}
                           </section>
                      </div>
                      <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                                <div class="row mt-4 mb-3">
                                    <div class="col-sm-12">
                                        <h5 class="text-center">Great work! you are going to get this file free.</h5>
                                    </div>
                                </div>
                                <div class="row justify-content-center parent">
                                      <div class="col-3 col-sm-12 col-md-12 col-lg-12 text-center parent" data-wow-delay="0.2s" >
                    <!--					  	<a href="javascript:void(0)"  data-toggle="modal" data-target="#myModal" class="text-black docs_plan_box">-->
                                            <label class="d-block label mb-0">
                                                <div class="docs_plan_box docs_free_plan_box shadow mt-4">
                                                    <div class="docs_plan_box_upper pt-4 pl-2 pr-2 pb-4">
                                                        <div class="d-flex pl-2 pr-2">
                                                            <div class="flex-fill text-left font-weight-bold"> Our popular free plan </div>
                                                            <div class="d-flex flex-fill justify-content-end">
                                                                <h5 class="font-weight-bold"> $ {{ plan.price }} <small> /{{ plan.days }}days </small></h5>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="docs_plan_box_lower text-left pt-4 pl-2 pr-2 pb-4">
                                                        <ul class="pl-0 pl-4 pr-4 list-unstyled">
                                                            <li> <i class="fas fa-check-square check_blue"></i> 1 Document view </li>
                                                            <li> <i class="fas fa-check-square check_blue"></i> 1 Document Download </li>
                                                        </ul>

                                                        <h5 class="pl-4"> Terms to use our free plan : </h5>
                                                        <ul class="text-left list_circle" style="line-height: 1.8rem;">
                                                            <li>Upload 2 study files ( e.g. assignment, report etc. )</li>
                                                            <li>Don't upload plagiarize content.</li>
                                                            <li>Upload of similar files will lead to rejection.</li>
                                                            <li>Content should not be published on any other website or indexed on
                                                                search engine.
                                                            </li>
                                                            <li>Content should be grammatically correct.</li>
                                                            <li>Our team will review your files.</li>
                                                            <li>Estimate approval time 24 hours.</li>
                                                            <li>Content should be at least 500 words or more.</li>
                                                            <li>Content should not be copyrighted by anyone.</li>
                                                        </ul>

                                                        <div class="d-flex justify-content-end">
                                                            <a href="javascript:void(0)" data-toggle="modal" data-target="#myModal" class="btn text-white btn_common btn_blue"> Upload File </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </label>
                                      </div>
                                    </div>
                      </div>
                    </div>
                </div>
            </div>

    {% comment %}
            <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button>
    {% endcomment %}

            <div id="myModal" class="modal fade" role="dialog">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content shadow">
                        <div class="modal-header bg-light">
                            <h4 class="modal-title"> Upload Documents </h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <div class="text-center">
                                <img src="{% static 'src/assets/images/v2/docs_emailer.png' %}" class="img-fluid" />
                            </div>
                            <div class="mt-element-step mx-5 my-5">
                                <div class="row step-line">
                                    {% comment %}
                                    {% if order.status > 1 %} done {% elif order.status == 1 %} active{% endif %}
                                    {% endcomment %}
                                    <div class="col mt-step-col status_1 pt-20 pb-20 active d-block text-center">
                                        <div class="row">
                                            <div class="col-12">
                                                <div>
                                                    <div class="mt-step-number m-0 bg-white assigned">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12">
                                                <div>
                                                    <div class="mt-step-title uppercase theme-color-blue"> 1 </div>
                                                    <p class="stepperfont">Upload first document for document</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col mt-step-col status_2 pt-20 pb-20 d-block text-center">
                                        <div class="row">
                                            <div class="col-12">
                                                <div>
                                                    <div class="mt-step-number m-0 bg-white assigned">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12">
                                                <div>
                                                    <div class="mt-step-title uppercase theme-color-blue"> 2 </div>
                                                    <p class="stepperfont">Upload second document for document</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col mt-step-col status_3 pt-20 pb-20 d-block text-center">
                                        <div class="row">
                                            <div class="col-12">
                                                <div>
                                                    <div class="mt-step-number m-0 bg-white assigned">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-12">
                                                <div>
                                                    <div class="mt-step-title uppercase theme-color-blue">3</div>
                                                    <p class="stepperfont">Successfully Uploaded !!</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="first-doc status_1_content mx-5 my-5">
                                <form action="" enctype="multipart/form-data" id="upload-form1" class="docpay_form">
                                    {% csrf_token %}
                                    <div class="row mt-3 mb-sm-3">
                                        <div class="col-sm-6 col-md-6">
                                            <div class="form-group docpay_input">
                                                <label for="id_course_name" class="star"><strong>{{form1.course_name.label}}:</strong></label>
                                                {{form1.course_name}}
                                                <span class="course_name form-text text-danger ">{{form1.course_name.errors}}</span>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-md-6">
                                            <div class="form-group docpay_input">
                                                <label for="id_course_code" class=""> <strong>{{form1.course_code.label}}:</strong></label>

                                                {{ form1.course_code }}
                                                <span class="course_code form-text text-danger ">{{form1.course_code.errors}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mb-sm-3">
                                        <div class="col-sm-12 col-md-12">
                                            <div class="form-group docpay_subj">
                                                <label for="id_subject"
                                                       class="star"><strong>{{form1.subjects.label}}:</strong></label>

                                                {{ form1.subjects }}
                                                <span class="subjects form-text text-danger ">{{form1.subjects.errors}}</span>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="row mb-sm-3">
                                        <div class="col-sm-6 col-md-6">
                                            <div class="form-group docpay_country">
                                                <label for="id_country"
                                                       class="star"><strong>{{form1.country.label}}:</strong></label>
                                                <div class="position-relative">
                                                    {% get_countries as countries %}
                                                    <select class="form-control js-example-basic-single" name="country">
                                                        {% for country in countries %}
                                                        {% if country.code == location %}
                                                        <option value="{{ country.code }}" selected>{{ country.name }}</option>
                                                        {% else %}
                                                        <option value="{{ country.code }}">{{ country.name }}</option>
                                                        {% endif %}
                                                        {% endfor %}
                                                    </select>
                                                    <span class="country form-text text-danger ">{{form1.country.errors}}</span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-md-6">
                                            <div class="form-group docpay_input">
                                                <label for="id_college" class=""><strong>{{form1.university.label}}:</strong></label>

                                                {{ form1.university }}
                                                <span class="university form-text text-danger ">{{form1.university.errors}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mb-sm-3">
                                        <div class="col-sm-6 col-md-6">
                                            <div class="form-group docpay_type">
                                                <label for="id_document" class="star"><strong>{{form1.type.label}}:</strong></label>

                                                {{ form1.type }}
                                                <span class="type form-text text-danger ">{{form1.type.errors}}</span>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-md-6">
                                            <div class="form-group docpay_file">
                                                <label for="inputGroupFile02" class="star"><strong>{{form1.upload_file.label}}:</strong></label>

                                                <div class="input-group">
                                                    <div class="custom-file docpay_file">
                                                        {{ form1.upload_file}}
                                                        <label class="custom-file-label text-truncate"
                                                               for="inputGroupFile02">Choose file</label>
                                                    </div>
                                                    <div class="input-group-append">
                                                        <span class=""></span>
                                                    </div>
                                                </div>
                                                <small class="form-text text-muted mt-2"> You can upload doc, docx, and pdf format. Max file-size should be 5 MB</small>
                                                <span class="upload_file form-text text-danger ">{{form1.upload_file.errors}}</span>
                                            </div>
                                        </div>

                                        {% comment %}
                                        <div class="col-sm-8">
                                            {{ form1.upload_file}}
                                            <span class="form-text text-danger ">{{form1.upload_file.errors}}</span>
                                        </div>
                                        {% endcomment %}
                                    </div>
                                    <div class="row d-flex justify-content-center mt-3 mb-sm-3">
                                        <div class="col-sm-12 text-center">
                                            <input type="submit" value="Next" class="btn btn_common btn_blue w-100">
                                        </div>
                                    </div>
                                </form>

                                {% comment %}
                                <form action="." method="post" id="">
                                    {% csrf_token %}
                                    {{form1.as_p}}tel:+1-312 97 5479

                                    <input type="hidden" name="required_document" value="{{doc}}">
                                    <input type="submit" value="submit" class="btn btn_common btn_blue px-sm-5 px-4">
                                </form>
                                {% endcomment %}
                            </div>
                            <div class="second-doc status_2_content mx-5 my-5" style="display: none">
                                <form method="POST" action="." enctype="multipart/form-data" id="upload-form2" class="docpay_form">
                                    {% csrf_token %}
                                    <div class="row mt-3 mb-sm-3">
                                        <div class="col-sm-6 col-md-6">
                                            <div class="form-group docpay_input">
                                                <label for="id_course_name_2" class="star"><strong>{{form2.course_name.label}}:</strong></label>
                                                {{form2.course_name}}
                                                <span class="course_name form-text text-danger ">{{form2.course_name.errors}}</span>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-md-6">
                                            <div class="form-group docpay_input">
                                                <label for="id_course_code_2"
                                                       class=""><strong>{{form2.course_code.label}}:</strong></label>
                                                {{ form2.course_code }}
                                                <span class="course_code form-text text-danger ">{{form2.course_code.errors}}</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mb-sm-3">
                                        <div class="col-sm-12 col-md-12">
                                            <div class="form-group docpay_subj">
                                                <label for="id_subject_2"
                                                       class="star"><strong>{{form2.subjects.label}}:</strong></label>
                                                {{ form2.subjects }}
                                                <span class="subjects form-text text-danger ">{{form2.subjects.errors}}</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row mb-sm-3">
                                        <div class="col-sm-6 col-md-6">
                                            <div class="form-group position-relative docpay_country">
                                                <label for="id_country_2"
                                                       class="star"><strong>{{form2.country.label}}:</strong></label>
                                                {% get_countries as countries %}
                                                <select class="form-control js-example-basic-single" name="country">
                                                    {% for country in countries %}
                                                    {% if country.code == location %}
                                                    <option value="{{ country.code }}" selected>{{ country.name }}</option>
                                                    {% else %}
                                                    <option value="{{ country.code }}">{{ country.name }}</option>
                                                    {% endif %}
                                                    {% endfor %}
                                                </select>
                                                <span class="country form-text text-danger ">{{form2.country.errors}}</span>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-md-6">
                                            <div class="form-group docpay_input">
                                                <label for="id_college_2"
                                                       class=""><strong>{{form2.university.label}}:</strong></label>
                                                {{ form2.university }}
                                                <span class="university form-text text-danger ">{{form2.university.errors}}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mb-sm-3">
                                        <div class="col-sm-6 col-md-6">
                                            <div class="form-group docpay_type">
                                                <label for="id_document_2"
                                                       class="star"><strong>{{form2.type.label}}:</strong></label>
                                                {{ form2.type }}
                                                <span class="type form-text text-danger ">{{form2.type.errors}}</span>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-md-6">
                                            <div class="form-group docpay_file">
                                                <label for="inputGroupFile02_2" class="star"><strong>{{form2.upload_file.label}}:</strong></label>
                                                <div class="input-group">
                                                    <div class="custom-file">
                                                        {{ form2.upload_file}}
                                                        <label class="custom-file-label text-truncate"
                                                               for="inputGroupFile02_2">Choose file</label>
                                                    </div>
                                                    <div class="input-group-append">
                                                        <span class=""></span>
                                                    </div>
                                                </div>
                                                <small class="form-text text-muted ">
                                                    You can upload doc, docx, and pdf format. Max file-size should be 5
                                                    MB</small>
                                                <span class="upload_file form-text text-danger ">{{form2.upload_file.errors}}</span>

                                            </div>
                                        </div>
                                        {% comment %}
                                        <div class="col-sm-8">
                                            {{ form2.upload_file}}
                                            <span class="form-text text-danger ">{{form2.upload_file.errors}}</span>
                                        </div>
                                        {% endcomment %}
                                    </div>
                                    <div class="row d-flex justify-content-center mt-3 mb-sm-3">
                                        <div class="col-sm-12 text-center">
                                            <input type="submit" value="Upload document"
                                                   class="btn btn_common btn_blue w-100">
                                        </div>
                                    </div>
                                </form>

                                {% comment %}
                                <form action="." method="post" id=" ">
                                    {% csrf_token %}
                                    {{form1.as_p}}

                                    <input type="hidden" name="required_document" value="{{doc}}">
                                    <input type="submit" value="submit	"
                                           class="btn btn-bg-theme border-radius-20 text-white px-sm-5 px-4">
                                </form>
                                {% endcomment %}
                            </div>

                            <div class="upload-form status_3_content mx-5 my-5" style="display: none">
                                <form id="doc-upload" method="post" action=".">
                                    <p>please confirm to upload</p>
                                    {% csrf_token %}

                                    <input type="hidden" name="document" value="{{doc}}">
                                    <input type="submit" value="submit" class="btn btn_common btn_blue px-sm-5 px-4" id="final-confirm">
                                    <div class="loader"></div>
                                </form>
                            </div>

                            <div class="thankyou text-center" style="display: none">
                                <div class="row justify-content-center">
                                    <div class="col-8">
                                        <p class="Roboto-Bold"> Your documents have been uploaded and are under review. </p>
                                        <p class="Roboto-Regular text-muted"> You will be notified as soon as your documents are verified and requirement is ready to download</p>
                                        <p class="Roboto-Regular">You will be redirected to <strong>{{doc}}</strong> in <strong>10 seconds</strong> </p>
                                    </div>
                                </div>
                            </div>
                            <div class="show-loader">
                                <div class="loader"> </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="loading payment-loader">
        <div class="loader-container">
            <h4 class="text-center text-white">Your payment is being processed...</h4>
            <div class="loader"></div>
        </div>
    </div>
</div>

<div class="modal fade" id="PoPModal" role="dialog">
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header" style="padding-bottom: 0px;">
          <p>Select your plan first</p>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block extra_js %}
<script src='{% static "src/js/jquery.ui.widget.js" %}'></script>
<!--<script src='{% static "src/js/jquery.iframe-transport.js" %}' ></script>-->
<script src='{% static "src/js/jquery.fileupload.js" %}' ></script>

<script>
$(document).ready(function() {
    $('.js-example-basic-single').select2();

});
</script>
<script>
$(document).ready(function() {
    $('.js-example-basic-multiple').select2();
});
</script>
<script>
    $(document).on('change', '.custom-file-input', function (event) {
    $(this).next('.custom-file-label').html(event.target.files[0].name);
})
</script>

<script>
//multistep form
//ajax to submit form
// document upload
    $("#upload-form1").submit(function(e) {
        $(".first-doc").css("display", "none");
        jQuery(".show-loader").show();
        e.preventDefault();
        $("span.has-error").empty();

        var data = $("#upload-form1").serializeArray();


        var myForm = document.getElementById('upload-form1');
       data = new FormData(myForm);
       var d = data.unique_id



        $("div.error_file").text("");
                $(".enquiry-form-popup").hide();
                $(".form-icon-plane").hide();
                $(".form-loader").show();

        $.ajax({
            type : "POST",
            url : '{% url 'api:documents-api:document-upload-api' %}',
            enctype: 'multipart/form-data',
            data: data,
            processData: false,
            contentType: false,
            success: function(data){

                document.getElementById("upload-form1").reset();
                $(".first-doc").css("display", "none");

        $(".status_1").removeClass("active")
        $(".status_2").addClass("active")
        $(".status_1").addClass("done")

                $(".second-doc").css("display", "block");
                $('.show-loader').hide();
//                $("#doc-upload").
                $('#doc-upload').append("<input type='hidden' value='" + data.unique_id + "' name='unique_id' >");

            },
            error: function(data){
             $('.show-loader').hide();
              $(".first-doc").css("display", "block");
            var response = data.responseJSON;
            for (key in response) {
              $("#upload-form1 ."+key).addClass("has-error");
              $("#upload-form1 span." + key).text(response[key][0]);
            }

            }
        });
    });

    $("#upload-form2").submit(function(e) {
        $(".second-doc").css("display", "none");
        $('.show-loader').show();
        e.preventDefault();
        $("span.has-error").empty();

        var data = $("#upload-form2").serializeArray();


        var myForm = document.getElementById('upload-form2');
       data = new FormData(myForm);
       var d = data.unique_id


        $("div.error_file").text("");

                $(".enquiry-form-popup").hide();
                $(".form-icon-plane").hide();
                $(".form-loader").show();

        $.ajax({
            type : "POST",
            url : '{% url 'api:documents-api:document-upload-api' %}',
            enctype: 'multipart/form-data',
            data: data,
            processData: false,
            contentType: false,
            success: function(data){

                document.getElementById("upload-form2").reset();
                $(".second-doc").css("display", "none");
                $(".form-loader").show();
//                $(".upload-form").css("display", "block");
//                $("#doc-upload").
                $('#doc-upload').append("<input type='hidden' value='" + data.unique_id + "' name='unique_id' >");

        $(".status_2").removeClass("active")
        $(".status_2").addClass("done")
				$( "#final-confirm" ).trigger( "click" );


            },
            error: function(data){
             $('.show-loader').hide();
             $(".second-doc").css("display", "block");
            var response = data.responseJSON;
            for (key in response) {
              $("#upload-form2 ."+key).addClass("has-error");
              $("#upload-form2 span." + key).text(response[key][0]);
            }

            }
        });
    });



    $("#doc-upload").submit(function(e) {
    $(".upload-form").css("display", "none");
    $('.show-loader').show();
        e.preventDefault();
        $("span.has-error").empty();

        var data = $("#doc-upload").serializeArray();


        var myForm = document.getElementById('doc-upload');
       data = new FormData(myForm);
       var d = data.unique_id


        $("div.error_file").text("");
                $(".enquiry-form-popup").hide();
                $(".form-icon-plane").hide();
                $(".form-loader").show();

        $.ajax({
            type : "POST",
            url : '{% url 'api:documents-api:document-for-upload-api' %}',
            enctype: 'multipart/form-data',
            data: data,
            processData: false,
            contentType: false,
            success: function(data){

                document.getElementById("upload-form2").reset();
                $(".upload-form").css("display", "none");
//                $(".mt-element-step").css("display", "none");
                 $('.show-loader').hide();
                 $(".status_3").addClass("active")
                $(".thankyou").css("display", "block");
//                $("#doc-upload").
                $('#doc-upload').append("<input type='hidden' value='" + data.unique_id + "' name='unique_id' >");

                setTimeout(function(){ window.location.replace( "/document/{{doc}}")}, 10000) ;
            },
            error: function(data){
            $('.show-loader').hide();
            $(".thankyou").css("display", "block")
            var response = data.responseJSON;
            for (key in response) {
              $("#comment-form ."+key).addClass("has-error");
              $("#comment-form span." + key).text(response[key][0]);
            }

            }
        });
    });headerHeight = $(".primary-header").height() + 5;


  $( document ).ready(function() {
	$(".selected_plan").on("click", function(){
 	if ($("input[type='radio']").is(":checked")) {
 	$('html, body').animate({
        scrollTop: $($('a[href*="#check"]').attr('href')).offset().top
    }, 600);
 	key= $(this).data("key");
	value = $(this).val();
 	$("#id_custom").val("{{ user }}_" + key +"_{{doc}}");
	$("#id_amount").val(value);
 }
});


  	$('.parent .docs_plan_box').click(function() {
        $('.parent .docs_plan_box').removeClass("bg-blue-active plan-price");
        $(this).addClass("bg-blue-active plan-price");
  	})

  	$("#submitButton").click(function (e) {
            if (!$('input[name="radio"]').is(':checked')) {
                //$(".error-messages").text("Please select one of the below plan").fadeIn();
            	//alert("Please select one of the above plan");
                e.preventDefault();
            }
        });
 });

</script>

<!-- Include the PayPal JavaScript SDK -->
{% if debug %}
    <script src="https://www.paypal.com/sdk/js?client-id=Aei6_cYX5hfSF0WsVXJ3VR3Rc_C0KbneVwh3RLYx_OUJG3gS5m2XM-1tg9EFL7ffTjggfvaNhKQQnsyE&currency=USD"></script>
{% else %}
    <script src="https://www.paypal.com/sdk/js?client-id=AR64PRuqgne8Tt4-P5USVMPgEq0wl5x3stCFhuJGTa-8u04W5CQXHPW4V4ZKE_A9hUYTpgshJLZaMaVm&currency=USD"></script>
{% endif %}

<script>
/*$( document ).ready(function() {

	function getCookie(name) {
		let cookieValue = null;
		if (document.cookie && document.cookie !== '') {
			const cookies = document.cookie.split(';');
			for (let i = 0; i < cookies.length; i++) {
				const cookie = cookies[i].trim();
				// Does this cookie string begin with the name we want?
				if (cookie.substring(0, name.length + 1) === (name + '=')) {
					cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
					break;
				}
			}
		}
		return cookieValue;
	}
	var csrftoken = getCookie('csrftoken');
	var plan_value;
	var user = "{{ user }}"
	var key;
	var doc = "{{doc}}"

	$(".selected_plan").on("click", function(){
		if ($("input[type='radio']").is(":checked")) {
		$('html, body').animate({
			scrollTop: $($('a[href*="#check"]').attr('href')).offset().top
		}, 600);
		key= $(this).data("key");
		plan_value = $(this).val();
		$("#id_custom").val("{{ user }}_" + key +"_{{doc}}");
		$("#id_amount").val(plan_value);
		}
	});

        // Render the PayPal button into #paypal-button-container

        function completeOrder(details){
        	var url= "{% url 'documents:payment-validate' %}"
			var payment_details = details
			payment_details.user = user
			payment_details.key = key
			payment_details.doc = doc

			body = JSON.stringify(payment_details);
			$('.payment-loader').siblings().css({"filter": "blur(8px)", "-webkit-filter": "blur(8px)"});
	    	$('.payment-loader').show();

        	fetch(url, {
        		method:'POST',
        		headers:{
        			'Content-type':'application/json',
        			'X-CSRFToken':csrftoken,
        		},
        		body: body
        	})
//        	.then((response) => response.json())
//        	.then((data) => {
//        		console.log('success:', data);
//        		window.location.replace("{% url 'documents:document-view' doc %}");
//			})
			.then(function(res) {
                    return res.json();
                }).then(function(orderData) {
                    // Three cases to handle:
                    //   (1) Recoverable INSTRUMENT_DECLINED -> call actions.restart()
                    //   (2) Other non-recoverable errors -> Show a failure message
                    //   (3) Successful transaction -> Show a success / thank you message

                    // Your server defines the structure of 'orderData', which may differ
                    var errorDetail = Array.isArray(orderData.details) && orderData.details[0];

                    if (errorDetail && errorDetail.issue === 'INSTRUMENT_DECLINED') {
                        // Recoverable state, see: "Handle Funding Failures"
                        // https://developer.paypal.com/docs/checkout/integration-features/funding-failure/
                        return actions.restart();
                    }

                    if (errorDetail) {
                        var msg = 'Sorry, your transaction could not be processed.';
                        if (errorDetail.description) msg += '\n\n' + errorDetail.description;
                        if (orderData.debug_id) msg += ' (' + orderData.debug_id + ')';
                        // Show a failure message
                        return alert(msg);
                    }

                    // Show a success message to the buyer
//                    alert('Transaction completed by ' + orderData.payer.name.given_name);
        		console.log('success:', orderData);
        		window.location.replace("{% url 'documents:document-view' doc %}");
                });
        }


	$(".selected_plan").on("click", function(){
		if ($("input[type='radio']").is(":checked")) {
		$('html, body').animate({
			scrollTop: $($('a[href*="#check"]').attr('href')).offset().top
		}, 600);
		key= $(this).data("key");
		plan_value = $(this).val();
		$("#id_custom").val("{{ user }}_" + key +"_{{doc}}");
		$("#id_amount").val(plan_value);


				var payment_details1 = {}
				payment_details1['user'] = "{{user}}"
				payment_details1['key'] = key
				payment_details1['doc'] = "{{doc}}"
				payment_details1['tracking_id'] = "{{tracking_id}}"

			body = JSON.stringify(payment_details1);


		}
	});
//			var payment_details1 = {}
//			payment_details1['user'] = "{{user}}"
//			payment_details1['key'] = key
//			payment_details1['doc'] = "{{doc}}"
//			console.log(payment_details1)
//			body = JSON.stringify(payment_details1);


        paypal.Buttons({

        // Customize button (optional)
			locale: 'en_US',
			style: {
				size: 'small',
				color: 'blue',
				shape: 'pill',
				label: 'checkout',
			},

//            // Set up the transaction
//            createOrder: function(data, actions) {
//                return actions.order.create({
//                    purchase_units: [{
//                        amount: {
//                            value: plan_value
//                        }
//                    }]
//                });
//            },

            createOrder: function(data, actions) {
                return fetch("{% url 'documents:payment-check' %}", {
        		method:'POST',
        		headers:{
        			'Content-type':'application/json',
        			'X-CSRFToken':csrftoken,
        		},
        		body: body
        	}).then(function(res) {
                    return res.json();
                }).then(function(orderData) {
					return orderData.id;
                });
            },

//            // Finalize the transaction
//            onApprove: function(data, actions) {
//                return actions.order.capture().then(function(details) {
//                    // Show a success message to the buyer
//                    completeOrder(details)
//                    // alert('Transaction completed by ' + details.payer.name.given_name + '!');
//                });
//            }


            // Call your server to finalize the transaction
            onApprove: function(data, actions) {
//                    return actions.order.capture().then(function(details) {
//                    // Show a success message to the buyer
//                    completeOrder(details)
        	var url= "{% url 'documents:payment-validate' %}"
			var payment_details = {}
			payment_details.user = user
			payment_details.key = key
			payment_details.doc = doc
			payment_details.orderid = data.orderID
			payment_details.tracking_id = "{{tracking_id}}"

			body = JSON.stringify(payment_details);
			$('.payment-loader').siblings().css({"filter": "blur(8px)", "-webkit-filter": "blur(8px)"});
	    	$('.payment-loader').show();

        	fetch(url, {
        		method:'POST',
        		headers:{
        			'Content-type':'application/json',
        			'X-CSRFToken':csrftoken,
        		},
        		body: body
        	})
//        	.then((response) => response.json())
//        	.then((data) => {
//        		console.log('success:', data);
//        		window.location.replace("{% url 'documents:document-view' doc %}");
//			})
			.then(function(res) {
                    return res.json();
                }).then(function(orderData) {
                    // Three cases to handle:
                    //   (1) Recoverable INSTRUMENT_DECLINED -> call actions.restart()
                    //   (2) Other non-recoverable errors -> Show a failure message
                    //   (3) Successful transaction -> Show a success / thank you message

                    // Your server defines the structure of 'orderData', which may differ
                    var errorDetail = Array.isArray(orderData.details) && orderData.details[0];

                    if (errorDetail && errorDetail.issue === 'INSTRUMENT_DECLINED') {
                        // Recoverable state, see: "Handle Funding Failures"
                        // https://developer.paypal.com/docs/checkout/integration-features/funding-failure/
                        return actions.restart();
                    }

                    if (errorDetail) {
                        var msg = 'Sorry, your transaction could not be processed.';
                        if (errorDetail.description) msg += '\n\n' + errorDetail.description;
                        if (orderData.debug_id) msg += ' (' + orderData.debug_id + ')';
                        // Show a failure message
                        return alert(msg);
                    }

                    // Show a success message to the buyer
//                    alert('Transaction completed by ' + orderData.payer.name.given_name);
        		console.log('success:', orderData);
        		window.location.replace("{% url 'documents:document-view' doc %}");
                });

//                  });
            },
            onCancel: function (data) {

				// Buyer cancelled the payment

				//alert("Buyer Cancelled the Payment");
                $('.paypal-error').text("Payment canceled. Please try again to purchase.");
				//window.location = '<http://test.com/cancelURL';>
			},
			onError: function(err) {
				//An error occurred during the transaction

				// alert("An error occured, Pls debug");
			    // window.location = '<http://test.com/ErrorURL';>
			    $('.paypal-error').text("An error occurred during transaction. Please try again.");
			},
        }).render('#paypal-button-container');
});*/
</script>

<script>
$( document ).ready(function() {
	function getCookie(name) {
		let cookieValue = null;
		if (document.cookie && document.cookie !== '') {
			const cookies = document.cookie.split(';');
			for (let i = 0; i < cookies.length; i++) {
				const cookie = cookies[i].trim();
				if (cookie.substring(0, name.length + 1) === (name + '=')) {
					cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
					break;
				}
			}
		}
		return cookieValue;
	}

	var csrftoken = getCookie('csrftoken');
	var plan_value;
	var user = "{{ user }}"
	var key;
	var doc = "{{doc}}"

	$(".selected_plan").on("click", function(){
		if ($("input[type='radio']").is(":checked")) {
            $('html, body').animate({
                scrollTop: $($('a[href*="#check"]').attr('href')).offset().top
            }, 600);
            key= $(this).data("key");
            plan_value = $(this).val();
            $("#id_custom").val("{{ user }}_" + key +"_{{doc}}");
            $("#id_amount").val(plan_value);
		}
	});

    function completeOrder(details){
        var url= "{% url 'documents:payment-validate' %}"
        var payment_details = details
        payment_details.user = user
        payment_details.key = key
        payment_details.doc = doc

        body = JSON.stringify(payment_details);
        $('.payment-loader').siblings().css({"filter": "blur(8px)", "-webkit-filter": "blur(8px)"});
        $('.payment-loader').show();

        fetch(url, {
            method:'POST',
            headers:{
                'Content-type':'application/json',
                'X-CSRFToken':csrftoken,
            },
            body: body
        })
        .then(function(res) {
                return res.json();
            }).then(function(orderData) {
                var errorDetail = Array.isArray(orderData.details) && orderData.details[0];
                if (errorDetail && errorDetail.issue === 'INSTRUMENT_DECLINED') {
                    return actions.restart();
                }

                if (errorDetail) {
                    var msg = 'Sorry, your transaction could not be processed.';
                    if (errorDetail.description) msg += '\n\n' + errorDetail.description;
                    if (orderData.debug_id) msg += ' (' + orderData.debug_id + ')';
                    return alert(msg);
                }
            console.log('success:', orderData);
            window.location.replace("{% url 'documents:document-view' doc %}");
        });
    }

	$(".selected_plan").on("click", function(){
		if ($("input[type='radio']").is(":checked")) {
            $('html, body').animate({
                scrollTop: $($('a[href*="#check"]').attr('href')).offset().top
            }, 600);
            key= $(this).data("key");
            plan_value = $(this).val();
            $("#id_custom").val("{{ user }}_" + key +"_{{doc}}");
            $("#id_amount").val(plan_value);
            var payment_details1 = {}
            payment_details1['user'] = "{{user}}"
            payment_details1['key'] = key
            payment_details1['doc'] = "{{doc}}"
            payment_details1['tracking_id'] = "{{tracking_id}}"
            body = JSON.stringify(payment_details1);
		}
	});

    paypal.Buttons({
        locale: 'en_US',
        style: {
            size: 'small',
            color: 'blue',
            shape: 'pill',
            label: 'checkout',
        },

        // this is only for if no plan selected that both button is un-clickable
        onInit: function(data, actions) {
            actions.disable();
            $(".selected_plan").on("click", function(){
                if ($("input[type='radio']").is(":checked")) {
                    actions.enable();
                }else{
                    actions.disable();
                }
            });
        },

        /*onClick: function() {
            if ($("input[type='radio']").is(":checked")) {
                $(".payment-loader").show();
                setTimeout(function () {
                    $('.payment-loader').hide();
                }, 10000);
            }else{
                $('#PoPModal').modal('show');
            }
        },*/

        createOrder: function(data, actions) {
            $(".payment-loader").show();
            return fetch("{% url 'documents:payment-check' %}", {
            method:'POST',
            headers:{
                'Content-type':'application/json',
                'X-CSRFToken':csrftoken,
            },
            body: body
        }).then(function(res) {
                $(".payment-loader").hide();
                return res.json();
            }).then(function(orderData) {
                return orderData.id;
            });
        },

        onApprove: function(data, actions) {
            var url= "{% url 'documents:payment-validate' %}"
            var payment_details = {}
            payment_details.user = user
            payment_details.key = key
            payment_details.doc = doc
            payment_details.orderid = data.orderID
            payment_details.tracking_id = "{{tracking_id}}"
            body = JSON.stringify(payment_details);
            $('.payment-loader').siblings().css({"filter": "blur(8px)", "-webkit-filter": "blur(8px)"});
            $('.payment-loader').show();

            fetch(url, {
                method:'POST',
                headers:{
                    'Content-type':'application/json',
                    'X-CSRFToken':csrftoken,
                },
                body: body
            })

        .then(function(res) {
                return res.json();
            }).then(function(orderData) {
                var errorDetail = Array.isArray(orderData.details) && orderData.details[0];

                if (errorDetail && errorDetail.issue === 'INSTRUMENT_DECLINED') {
                    return actions.restart();
                }

                if (errorDetail) {
                    var msg = 'Sorry, your transaction could not be processed.';
                    if (errorDetail.description) msg += '\n\n' + errorDetail.description;
                    if (orderData.debug_id) msg += ' (' + orderData.debug_id + ')';
                    return alert(msg);
                }
            console.log('success:', orderData);
            window.location.replace("{% url 'documents:document-view' doc %}");
            });
        },
        onCancel: function (data) {
            console.log(data)
            //$('.paypal-error').text("Payment canceled. Please try again to purchase.");
        },
        onError: function(err) {
            $('.paypal-error').text("An error occurred during transaction. Please try again.");
        }
    }).render('#paypal-button-container');
});
</script>

<script>
$(document).ready(function() {
    $(".clickfree").click(function(){
        $(".plan_sub_title").hide();
    });
    $(".clickpaid").click(function(){
        $(".plan_sub_title").show();
    });


    $("#plan-name").text('');
    $('.parent').on('click',function(){
        var curr = $('.package_name', this).text();
        $("#plan-name").text(curr);
        var check_box = $(".docs_plan_box_upper p", this).html();
        $("#plan-name p").html("").html(check_box);
    });


    $("#add-money").text('');
    $('.parent').on('click',function(){
        var curr = $('h1', this).text();
        $("#add-money").text(curr);
        var check_box = $(".docs_plan_box_lower ul", this).html();
        $(".selected_docs_detail ul").html("").html(check_box);
    });
});

</script>


<script>
      $(document).ready(function(){
        $('#showRibbon p:first-child').first().addClass('ribbon1').append('Most Popular');
        //$('#showRibbon').first().addClass('info').html('Information');
        //$("#showRibbon:first-child").append("<p class="ribbon"> Most Popular</p>");
    });
</script>



{% endblock extra_js %}